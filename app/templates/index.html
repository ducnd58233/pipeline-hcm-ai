{% extends "base.html" %}
{% block content %}

<script src="https://unpkg.com/htmx.org@1.9.6"></script>
<script>
    document.body.addEventListener('htmx:wsConnected', function (evt) {
        console.log('WebSocket connected');
    });

    document.body.addEventListener('htmx:wsAfterMessage', function (evt) {
        if (evt.detail.message.action === 'update_selected_frames') {
            htmx.trigger('#selected-frames', 'frameSelected');
        }
    });
</script>

<h1>Video Retrieval System</h1>

{% include 'components/search_bar.html' %}

<h2>Selected Frames</h2>
<div id="selected-frames" hx-get="/get_selected_frames" hx-trigger="load, frameSelected from:body" hx-target="this">
</div>

<h2>Search Results</h2>
<div id="search-results">
    <p>Enter a search query to see results.</p>
</div>

<div id="confirm-submit-modal" hx-swap-oob="true"></div>

{% endblock %}